export const match = function (pathname, routes) {
    let match;
    let index;
    const params = {};
    const routeKeys = Object.keys(routes);
    for (let i = 0; i < routeKeys.length && !match; i++) {
        const route = routeKeys[i];
        const keys = [];
        pathname.replace(RegExp(route === "*"
            ? ".*"
            : "^" +
                route.replace(/\//g, "\\/").replace(/:([\w]+)/g, function (_, key) {
                    keys.push(key);
                    return "([-\\.%\\w\\(\\)]+)";
                }) +
                "/?$", "g"), function () {
            for (let j = 1; j < arguments.length - 2;) {
                let value = arguments[j++];
                try {
                    value = decodeURI(value);
                }
                catch (_) {
                }
                params[keys.shift()] = value;
            }
            match = route;
            index = i;
        });
    }
    return routes[match](params);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUm91dGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL1JvdXRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLENBQUMsTUFBTSxLQUFLLEdBQUcsVUFBVyxRQUFRLEVBQUUsTUFBTTtJQUM1QyxJQUFJLEtBQUssQ0FBQTtJQUNULElBQUksS0FBSyxDQUFBO0lBQ1QsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFBO0lBQ2pCLE1BQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUUsTUFBTSxDQUFFLENBQUE7SUFFdkMsR0FBRyxDQUFDLENBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsTUFBTSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFHLENBQUM7UUFDcEQsTUFBTSxLQUFLLEdBQUcsU0FBUyxDQUFFLENBQUMsQ0FBRSxDQUFBO1FBQzVCLE1BQU0sSUFBSSxHQUFHLEVBQUUsQ0FBQTtRQUNmLFFBQVEsQ0FBQyxPQUFPLENBQ1osTUFBTSxDQUNGLEtBQUssS0FBSyxHQUFHO1lBQ1QsQ0FBQyxDQUFDLElBQUk7WUFDTixDQUFDLENBQUMsR0FBRztnQkFDTCxLQUFLLENBQUMsT0FBTyxDQUFFLEtBQUssRUFBRSxLQUFLLENBQUUsQ0FBQyxPQUFPLENBQUUsV0FBVyxFQUFFLFVBQVcsQ0FBQyxFQUFFLEdBQUc7b0JBQ2pFLElBQUksQ0FBQyxJQUFJLENBQUUsR0FBRyxDQUFFLENBQUE7b0JBQ2hCLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQTtnQkFDaEMsQ0FBQyxDQUFFO2dCQUNILEtBQUssRUFDVCxHQUFHLENBQ04sRUFDRDtZQUNJLEdBQUcsQ0FBQyxDQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLEdBQUksQ0FBQztnQkFDMUMsSUFBSSxLQUFLLEdBQUcsU0FBUyxDQUFFLENBQUMsRUFBRSxDQUFFLENBQUE7Z0JBQzVCLElBQUksQ0FBQztvQkFDRCxLQUFLLEdBQUcsU0FBUyxDQUFFLEtBQUssQ0FBRSxDQUFBO2dCQUM5QixDQUFDO2dCQUFDLEtBQUssQ0FBQyxDQUFFLENBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQ2YsQ0FBQztnQkFDRCxNQUFNLENBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFFLEdBQUcsS0FBSyxDQUFBO1lBQ2xDLENBQUM7WUFDRCxLQUFLLEdBQUcsS0FBSyxDQUFBO1lBQ2IsS0FBSyxHQUFHLENBQUMsQ0FBQTtRQUNiLENBQUMsQ0FDSixDQUFBO0lBQ0wsQ0FBQztJQUVELE1BQU0sQ0FBQyxNQUFNLENBQUUsS0FBSyxDQUFFLENBQUUsTUFBTSxDQUFFLENBQUE7QUFDcEMsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IG1hdGNoID0gZnVuY3Rpb24gKCBwYXRobmFtZSwgcm91dGVzICkge1xuICAgIGxldCBtYXRjaFxuICAgIGxldCBpbmRleFxuICAgIGNvbnN0IHBhcmFtcyA9IHt9XG4gICAgY29uc3Qgcm91dGVLZXlzID0gT2JqZWN0LmtleXMoIHJvdXRlcyApXG5cbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCByb3V0ZUtleXMubGVuZ3RoICYmICFtYXRjaDsgaSsrICkge1xuICAgICAgICBjb25zdCByb3V0ZSA9IHJvdXRlS2V5c1sgaSBdXG4gICAgICAgIGNvbnN0IGtleXMgPSBbXVxuICAgICAgICBwYXRobmFtZS5yZXBsYWNlKFxuICAgICAgICAgICAgUmVnRXhwKFxuICAgICAgICAgICAgICAgIHJvdXRlID09PSBcIipcIlxuICAgICAgICAgICAgICAgICAgICA/IFwiLipcIlxuICAgICAgICAgICAgICAgICAgICA6IFwiXlwiICtcbiAgICAgICAgICAgICAgICAgICAgcm91dGUucmVwbGFjZSggL1xcLy9nLCBcIlxcXFwvXCIgKS5yZXBsYWNlKCAvOihbXFx3XSspL2csIGZ1bmN0aW9uICggXywga2V5ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5cy5wdXNoKCBrZXkgKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiKFstXFxcXC4lXFxcXHdcXFxcKFxcXFwpXSspXCJcbiAgICAgICAgICAgICAgICAgICAgfSApICtcbiAgICAgICAgICAgICAgICAgICAgXCIvPyRcIixcbiAgICAgICAgICAgICAgICBcImdcIlxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBmb3IgKCBsZXQgaiA9IDE7IGogPCBhcmd1bWVudHMubGVuZ3RoIC0gMjsgKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGFyZ3VtZW50c1sgaisrIF1cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZGVjb2RlVVJJKCB2YWx1ZSApXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKCBfICkge1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtc1sga2V5cy5zaGlmdCgpIF0gPSB2YWx1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtYXRjaCA9IHJvdXRlXG4gICAgICAgICAgICAgICAgaW5kZXggPSBpXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gcm91dGVzWyBtYXRjaCBdKCBwYXJhbXMgKVxufVxuXG4iXX0=