export var match = function (pathname, routes) {
    var match;
    var index;
    var params = {};
    var routeKeys = Object.keys(routes);
    var _loop_1 = function (i) {
        var route = routeKeys[i];
        var keys = [];
        pathname.replace(RegExp(route === "*"
            ? ".*"
            : "^" +
                route.replace(/\//g, "\\/").replace(/:([\w]+)/g, function (_, key) {
                    keys.push(key);
                    return "([-\\.%\\w\\(\\)]+)";
                }) +
                "/?$", "g"), function () {
            for (var j = 1; j < arguments.length - 2;) {
                var value = arguments[j++];
                try {
                    value = decodeURI(value);
                }
                catch (_) {
                }
                params[keys.shift()] = value;
            }
            match = route;
            index = i;
        });
    };
    for (var i = 0; i < routeKeys.length && !match; i++) {
        _loop_1(i);
    }
    return routes[match](params);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUm91dGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL1JvdXRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLENBQUMsSUFBTSxLQUFLLEdBQUcsVUFBVyxRQUFRLEVBQUUsTUFBTTtJQUM1QyxJQUFJLEtBQUssQ0FBQTtJQUNULElBQUksS0FBSyxDQUFBO0lBQ1QsSUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFBO0lBQ2pCLElBQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUUsTUFBTSxDQUFFLENBQUE7NEJBRTdCLENBQUM7UUFDUCxJQUFNLEtBQUssR0FBRyxTQUFTLENBQUUsQ0FBQyxDQUFFLENBQUE7UUFDNUIsSUFBTSxJQUFJLEdBQUcsRUFBRSxDQUFBO1FBQ2YsUUFBUSxDQUFDLE9BQU8sQ0FDWixNQUFNLENBQ0YsS0FBSyxLQUFLLEdBQUc7WUFDVCxDQUFDLENBQUMsSUFBSTtZQUNOLENBQUMsQ0FBQyxHQUFHO2dCQUNMLEtBQUssQ0FBQyxPQUFPLENBQUUsS0FBSyxFQUFFLEtBQUssQ0FBRSxDQUFDLE9BQU8sQ0FBRSxXQUFXLEVBQUUsVUFBVyxDQUFDLEVBQUUsR0FBRztvQkFDakUsSUFBSSxDQUFDLElBQUksQ0FBRSxHQUFHLENBQUUsQ0FBQTtvQkFDaEIsTUFBTSxDQUFDLHFCQUFxQixDQUFBO2dCQUNoQyxDQUFDLENBQUU7Z0JBQ0gsS0FBSyxFQUNULEdBQUcsQ0FDTixFQUNEO1lBQ0ksR0FBRyxDQUFDLENBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsTUFBTSxHQUFHLENBQUMsR0FBSSxDQUFDO2dCQUMxQyxJQUFJLEtBQUssR0FBRyxTQUFTLENBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQTtnQkFDNUIsSUFBSSxDQUFDO29CQUNELEtBQUssR0FBRyxTQUFTLENBQUUsS0FBSyxDQUFFLENBQUE7Z0JBQzlCLENBQUM7Z0JBQUMsS0FBSyxDQUFDLENBQUUsQ0FBRSxDQUFDLENBQUMsQ0FBQztnQkFDZixDQUFDO2dCQUNELE1BQU0sQ0FBRSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUUsR0FBRyxLQUFLLENBQUE7WUFDbEMsQ0FBQztZQUNELEtBQUssR0FBRyxLQUFLLENBQUE7WUFDYixLQUFLLEdBQUcsQ0FBQyxDQUFBO1FBQ2IsQ0FBQyxDQUNKLENBQUE7SUFDTCxDQUFDO0lBNUJELEdBQUcsQ0FBQyxDQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUU7Z0JBQTFDLENBQUM7S0E0QlY7SUFFRCxNQUFNLENBQUMsTUFBTSxDQUFFLEtBQUssQ0FBRSxDQUFFLE1BQU0sQ0FBRSxDQUFBO0FBQ3BDLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBtYXRjaCA9IGZ1bmN0aW9uICggcGF0aG5hbWUsIHJvdXRlcyApIHtcbiAgICBsZXQgbWF0Y2hcbiAgICBsZXQgaW5kZXhcbiAgICBjb25zdCBwYXJhbXMgPSB7fVxuICAgIGNvbnN0IHJvdXRlS2V5cyA9IE9iamVjdC5rZXlzKCByb3V0ZXMgKVxuXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgcm91dGVLZXlzLmxlbmd0aCAmJiAhbWF0Y2g7IGkrKyApIHtcbiAgICAgICAgY29uc3Qgcm91dGUgPSByb3V0ZUtleXNbIGkgXVxuICAgICAgICBjb25zdCBrZXlzID0gW11cbiAgICAgICAgcGF0aG5hbWUucmVwbGFjZShcbiAgICAgICAgICAgIFJlZ0V4cChcbiAgICAgICAgICAgICAgICByb3V0ZSA9PT0gXCIqXCJcbiAgICAgICAgICAgICAgICAgICAgPyBcIi4qXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIl5cIiArXG4gICAgICAgICAgICAgICAgICAgIHJvdXRlLnJlcGxhY2UoIC9cXC8vZywgXCJcXFxcL1wiICkucmVwbGFjZSggLzooW1xcd10rKS9nLCBmdW5jdGlvbiAoIF8sIGtleSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXMucHVzaCgga2V5IClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIihbLVxcXFwuJVxcXFx3XFxcXChcXFxcKV0rKVwiXG4gICAgICAgICAgICAgICAgICAgIH0gKSArXG4gICAgICAgICAgICAgICAgICAgIFwiLz8kXCIsXG4gICAgICAgICAgICAgICAgXCJnXCJcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZm9yICggbGV0IGogPSAxOyBqIDwgYXJndW1lbnRzLmxlbmd0aCAtIDI7ICkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBhcmd1bWVudHNbIGorKyBdXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGRlY29kZVVSSSggdmFsdWUgKVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICggXyApIHtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwYXJhbXNbIGtleXMuc2hpZnQoKSBdID0gdmFsdWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbWF0Y2ggPSByb3V0ZVxuICAgICAgICAgICAgICAgIGluZGV4ID0gaVxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIHJvdXRlc1sgbWF0Y2ggXSggcGFyYW1zIClcbn1cblxuIl19