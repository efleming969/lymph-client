import { merge } from "./Utils";
const extractMessage = function (parent_message, message) {
    return merge(message, { name: message.name.replace(":" + parent_message, "") });
};
export const create = function (routeDefinitions) {
    return function (message, state) {
        for (let name in routeDefinitions) {
            if (message.name.indexOf(":" + name) === 0) {
                return routeDefinitions[name](extractMessage(name, message), state);
            }
        }
        return [state, undefined];
    };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVzc2FnZVJvdXRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9NZXNzYWdlUm91dGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxTQUFTLENBQUE7QUFRL0IsTUFBTSxjQUFjLEdBQUcsVUFBVyxjQUFjLEVBQUUsT0FBTztJQUNyRCxNQUFNLENBQUMsS0FBSyxDQUFFLE9BQU8sRUFBRSxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBRSxHQUFHLEdBQUcsY0FBYyxFQUFFLEVBQUUsQ0FBRSxFQUFFLENBQUUsQ0FBQTtBQUN2RixDQUFDLENBQUE7QUFFRCxNQUFNLENBQUMsTUFBTSxNQUFNLEdBQUcsVUFBVyxnQkFBcUI7SUFDbEQsTUFBTSxDQUFDLFVBQVcsT0FBZ0IsRUFBRSxLQUFVO1FBQzFDLEdBQUcsQ0FBQyxDQUFFLElBQUksSUFBSSxJQUFJLGdCQUFpQixDQUFDLENBQUMsQ0FBQztZQUNsQyxFQUFFLENBQUMsQ0FBRSxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBRSxHQUFHLEdBQUcsSUFBSSxDQUFFLEtBQUssQ0FBRSxDQUFDLENBQUMsQ0FBQztnQkFDN0MsTUFBTSxDQUFDLGdCQUFnQixDQUFFLElBQUksQ0FBRSxDQUFFLGNBQWMsQ0FBRSxJQUFJLEVBQUUsT0FBTyxDQUFFLEVBQUUsS0FBSyxDQUFFLENBQUE7WUFDN0UsQ0FBQztRQUNMLENBQUM7UUFFRCxNQUFNLENBQUMsQ0FBRSxLQUFLLEVBQUUsU0FBUyxDQUFFLENBQUE7SUFDL0IsQ0FBQyxDQUFBO0FBQ0wsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWVyZ2UgfSBmcm9tIFwiLi9VdGlsc1wiXG5cbnR5cGUgTWVzc2FnZSA9IHtcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgZGF0YTogYW55LFxuICAgIGV2ZW50OiBhbnlcbn1cblxuY29uc3QgZXh0cmFjdE1lc3NhZ2UgPSBmdW5jdGlvbiAoIHBhcmVudF9tZXNzYWdlLCBtZXNzYWdlICkge1xuICAgIHJldHVybiBtZXJnZSggbWVzc2FnZSwgeyBuYW1lOiBtZXNzYWdlLm5hbWUucmVwbGFjZSggXCI6XCIgKyBwYXJlbnRfbWVzc2FnZSwgXCJcIiApIH0gKVxufVxuXG5leHBvcnQgY29uc3QgY3JlYXRlID0gZnVuY3Rpb24gKCByb3V0ZURlZmluaXRpb25zOiBhbnkgKTogKCBNZXNzYWdlLCBhbnkgKSA9PiBbIGFueSwgYW55IF0ge1xuICAgIHJldHVybiBmdW5jdGlvbiAoIG1lc3NhZ2U6IE1lc3NhZ2UsIHN0YXRlOiBhbnkgKTogWyBhbnksIGFueSBdIHtcbiAgICAgICAgZm9yICggbGV0IG5hbWUgaW4gcm91dGVEZWZpbml0aW9ucyApIHtcbiAgICAgICAgICAgIGlmICggbWVzc2FnZS5uYW1lLmluZGV4T2YoIFwiOlwiICsgbmFtZSApID09PSAwICkge1xuICAgICAgICAgICAgICAgIHJldHVybiByb3V0ZURlZmluaXRpb25zWyBuYW1lIF0oIGV4dHJhY3RNZXNzYWdlKCBuYW1lLCBtZXNzYWdlICksIHN0YXRlIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbIHN0YXRlLCB1bmRlZmluZWQgXVxuICAgIH1cbn1cbiJdfQ==