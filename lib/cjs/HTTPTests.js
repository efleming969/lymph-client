"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var HTTP = require("./HTTP");
var TestUtils_1 = require("./TestUtils");
test("successful post and command", function () {
    var send = HTTP.sendCommand(TestUtils_1.createFakeFetch({ status: 200, data: { name: "foo" } }));
    return send("/api/post1", {}, "jwt").then(function (response) {
        expect(response).toEqual({ status: 200, data: { name: "foo" } });
    });
});
test("successful post, but server rejected command", function () {
    var send = HTTP.sendCommand(TestUtils_1.createFakeFetch({ status: 400, data: { message: "bar" } }));
    return send("/api/post1", {}, "jwt").then(function (response) {
        expect(response).toEqual({ status: 400, data: { message: "bar" } });
    });
});
test("successful get with returned data", function () {
    var send = HTTP.sendQuery(TestUtils_1.createFakeFetch({ status: 200, data: { name: "foo" } }));
    return send("/api/get1", "jwt").then(function (response) {
        expect(response).toEqual({ status: 200, data: { name: "foo" } });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSFRUUFRlc3RzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL0hUVFBUZXN0cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDZCQUE4QjtBQUM5Qix5Q0FBNkM7QUFFN0MsSUFBSSxDQUFFLDZCQUE2QixFQUFFO0lBQ2pDLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUUsMkJBQWUsQ0FBRSxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUUsQ0FBRSxDQUFBO0lBRTFGLE1BQU0sQ0FBQyxJQUFJLENBQUUsWUFBWSxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUUsQ0FBQyxJQUFJLENBQUUsVUFBVyxRQUFRO1FBQzVELE1BQU0sQ0FBRSxRQUFRLENBQUUsQ0FBQyxPQUFPLENBQUUsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFFLENBQUE7SUFDeEUsQ0FBQyxDQUFFLENBQUE7QUFFUCxDQUFDLENBQUUsQ0FBQTtBQUVILElBQUksQ0FBRSw4Q0FBOEMsRUFBRTtJQUNsRCxJQUFNLElBQUksR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFFLDJCQUFlLENBQUUsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFFLENBQUUsQ0FBQTtJQUU3RixNQUFNLENBQUMsSUFBSSxDQUFFLFlBQVksRUFBRSxFQUFFLEVBQUUsS0FBSyxDQUFFLENBQUMsSUFBSSxDQUFFLFVBQVcsUUFBUTtRQUM1RCxNQUFNLENBQUUsUUFBUSxDQUFFLENBQUMsT0FBTyxDQUFFLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBRSxDQUFBO0lBQzNFLENBQUMsQ0FBRSxDQUFBO0FBQ1AsQ0FBQyxDQUFFLENBQUE7QUFFSCxJQUFJLENBQUUsbUNBQW1DLEVBQUU7SUFDdkMsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBRSwyQkFBZSxDQUFFLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBRSxDQUFFLENBQUE7SUFFeEYsTUFBTSxDQUFDLElBQUksQ0FBRSxXQUFXLEVBQUUsS0FBSyxDQUFFLENBQUMsSUFBSSxDQUFFLFVBQVcsUUFBUTtRQUN2RCxNQUFNLENBQUUsUUFBUSxDQUFFLENBQUMsT0FBTyxDQUFFLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBRSxDQUFBO0lBQ3hFLENBQUMsQ0FBRSxDQUFBO0FBQ1AsQ0FBQyxDQUFFLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBIVFRQIGZyb20gXCIuL0hUVFBcIlxuaW1wb3J0IHsgY3JlYXRlRmFrZUZldGNoIH0gZnJvbSBcIi4vVGVzdFV0aWxzXCJcblxudGVzdCggXCJzdWNjZXNzZnVsIHBvc3QgYW5kIGNvbW1hbmRcIiwgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHNlbmQgPSBIVFRQLnNlbmRDb21tYW5kKCBjcmVhdGVGYWtlRmV0Y2goIHsgc3RhdHVzOiAyMDAsIGRhdGE6IHsgbmFtZTogXCJmb29cIiB9IH0gKSApXG5cbiAgICByZXR1cm4gc2VuZCggXCIvYXBpL3Bvc3QxXCIsIHt9LCBcImp3dFwiICkudGhlbiggZnVuY3Rpb24gKCByZXNwb25zZSApIHtcbiAgICAgICAgZXhwZWN0KCByZXNwb25zZSApLnRvRXF1YWwoIHsgc3RhdHVzOiAyMDAsIGRhdGE6IHsgbmFtZTogXCJmb29cIiB9IH0gKVxuICAgIH0gKVxuXG59IClcblxudGVzdCggXCJzdWNjZXNzZnVsIHBvc3QsIGJ1dCBzZXJ2ZXIgcmVqZWN0ZWQgY29tbWFuZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3Qgc2VuZCA9IEhUVFAuc2VuZENvbW1hbmQoIGNyZWF0ZUZha2VGZXRjaCggeyBzdGF0dXM6IDQwMCwgZGF0YTogeyBtZXNzYWdlOiBcImJhclwiIH0gfSApIClcblxuICAgIHJldHVybiBzZW5kKCBcIi9hcGkvcG9zdDFcIiwge30sIFwiand0XCIgKS50aGVuKCBmdW5jdGlvbiAoIHJlc3BvbnNlICkge1xuICAgICAgICBleHBlY3QoIHJlc3BvbnNlICkudG9FcXVhbCggeyBzdGF0dXM6IDQwMCwgZGF0YTogeyBtZXNzYWdlOiBcImJhclwiIH0gfSApXG4gICAgfSApXG59IClcblxudGVzdCggXCJzdWNjZXNzZnVsIGdldCB3aXRoIHJldHVybmVkIGRhdGFcIiwgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHNlbmQgPSBIVFRQLnNlbmRRdWVyeSggY3JlYXRlRmFrZUZldGNoKCB7IHN0YXR1czogMjAwLCBkYXRhOiB7IG5hbWU6IFwiZm9vXCIgfSB9ICkgKVxuXG4gICAgcmV0dXJuIHNlbmQoIFwiL2FwaS9nZXQxXCIsIFwiand0XCIgKS50aGVuKCBmdW5jdGlvbiAoIHJlc3BvbnNlICkge1xuICAgICAgICBleHBlY3QoIHJlc3BvbnNlICkudG9FcXVhbCggeyBzdGF0dXM6IDIwMCwgZGF0YTogeyBuYW1lOiBcImZvb1wiIH0gfSApXG4gICAgfSApXG59ICkiXX0=