"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.match = function (pathname, routes) {
    var match;
    var index;
    var params = {};
    var routeKeys = Object.keys(routes);
    var _loop_1 = function (i) {
        var route = routeKeys[i];
        var keys = [];
        pathname.replace(RegExp(route === "*"
            ? ".*"
            : "^" +
                route.replace(/\//g, "\\/").replace(/:([\w]+)/g, function (_, key) {
                    keys.push(key);
                    return "([-\\.%\\w\\(\\)]+)";
                }) +
                "/?$", "g"), function () {
            for (var j = 1; j < arguments.length - 2;) {
                var value = arguments[j++];
                try {
                    value = decodeURI(value);
                }
                catch (_) {
                }
                params[keys.shift()] = value;
            }
            match = route;
            index = i;
        });
    };
    for (var i = 0; i < routeKeys.length && !match; i++) {
        _loop_1(i);
    }
    return routes[match](params);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUm91dGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL1JvdXRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFhLFFBQUEsS0FBSyxHQUFHLFVBQVcsUUFBUSxFQUFFLE1BQU07SUFDNUMsSUFBSSxLQUFLLENBQUE7SUFDVCxJQUFJLEtBQUssQ0FBQTtJQUNULElBQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQTtJQUNqQixJQUFNLFNBQVMsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFFLE1BQU0sQ0FBRSxDQUFBOzRCQUU3QixDQUFDO1FBQ1AsSUFBTSxLQUFLLEdBQUcsU0FBUyxDQUFFLENBQUMsQ0FBRSxDQUFBO1FBQzVCLElBQU0sSUFBSSxHQUFHLEVBQUUsQ0FBQTtRQUNmLFFBQVEsQ0FBQyxPQUFPLENBQ1osTUFBTSxDQUNGLEtBQUssS0FBSyxHQUFHO1lBQ1QsQ0FBQyxDQUFDLElBQUk7WUFDTixDQUFDLENBQUMsR0FBRztnQkFDTCxLQUFLLENBQUMsT0FBTyxDQUFFLEtBQUssRUFBRSxLQUFLLENBQUUsQ0FBQyxPQUFPLENBQUUsV0FBVyxFQUFFLFVBQVcsQ0FBQyxFQUFFLEdBQUc7b0JBQ2pFLElBQUksQ0FBQyxJQUFJLENBQUUsR0FBRyxDQUFFLENBQUE7b0JBQ2hCLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQTtnQkFDaEMsQ0FBQyxDQUFFO2dCQUNILEtBQUssRUFDVCxHQUFHLENBQ04sRUFDRDtZQUNJLEdBQUcsQ0FBQyxDQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLEdBQUksQ0FBQztnQkFDMUMsSUFBSSxLQUFLLEdBQUcsU0FBUyxDQUFFLENBQUMsRUFBRSxDQUFFLENBQUE7Z0JBQzVCLElBQUksQ0FBQztvQkFDRCxLQUFLLEdBQUcsU0FBUyxDQUFFLEtBQUssQ0FBRSxDQUFBO2dCQUM5QixDQUFDO2dCQUFDLEtBQUssQ0FBQyxDQUFFLENBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQ2YsQ0FBQztnQkFDRCxNQUFNLENBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFFLEdBQUcsS0FBSyxDQUFBO1lBQ2xDLENBQUM7WUFDRCxLQUFLLEdBQUcsS0FBSyxDQUFBO1lBQ2IsS0FBSyxHQUFHLENBQUMsQ0FBQTtRQUNiLENBQUMsQ0FDSixDQUFBO0lBQ0wsQ0FBQztJQTVCRCxHQUFHLENBQUMsQ0FBRSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxNQUFNLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFO2dCQUExQyxDQUFDO0tBNEJWO0lBRUQsTUFBTSxDQUFDLE1BQU0sQ0FBRSxLQUFLLENBQUUsQ0FBRSxNQUFNLENBQUUsQ0FBQTtBQUNwQyxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgbWF0Y2ggPSBmdW5jdGlvbiAoIHBhdGhuYW1lLCByb3V0ZXMgKSB7XG4gICAgbGV0IG1hdGNoXG4gICAgbGV0IGluZGV4XG4gICAgY29uc3QgcGFyYW1zID0ge31cbiAgICBjb25zdCByb3V0ZUtleXMgPSBPYmplY3Qua2V5cyggcm91dGVzIClcblxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHJvdXRlS2V5cy5sZW5ndGggJiYgIW1hdGNoOyBpKysgKSB7XG4gICAgICAgIGNvbnN0IHJvdXRlID0gcm91dGVLZXlzWyBpIF1cbiAgICAgICAgY29uc3Qga2V5cyA9IFtdXG4gICAgICAgIHBhdGhuYW1lLnJlcGxhY2UoXG4gICAgICAgICAgICBSZWdFeHAoXG4gICAgICAgICAgICAgICAgcm91dGUgPT09IFwiKlwiXG4gICAgICAgICAgICAgICAgICAgID8gXCIuKlwiXG4gICAgICAgICAgICAgICAgICAgIDogXCJeXCIgK1xuICAgICAgICAgICAgICAgICAgICByb3V0ZS5yZXBsYWNlKCAvXFwvL2csIFwiXFxcXC9cIiApLnJlcGxhY2UoIC86KFtcXHddKykvZywgZnVuY3Rpb24gKCBfLCBrZXkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goIGtleSApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCIoWy1cXFxcLiVcXFxcd1xcXFwoXFxcXCldKylcIlxuICAgICAgICAgICAgICAgICAgICB9ICkgK1xuICAgICAgICAgICAgICAgICAgICBcIi8/JFwiLFxuICAgICAgICAgICAgICAgIFwiZ1wiXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGZvciAoIGxldCBqID0gMTsgaiA8IGFyZ3VtZW50cy5sZW5ndGggLSAyOyApIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gYXJndW1lbnRzWyBqKysgXVxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBkZWNvZGVVUkkoIHZhbHVlIClcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoIF8gKSB7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zWyBrZXlzLnNoaWZ0KCkgXSA9IHZhbHVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1hdGNoID0gcm91dGVcbiAgICAgICAgICAgICAgICBpbmRleCA9IGlcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiByb3V0ZXNbIG1hdGNoIF0oIHBhcmFtcyApXG59XG5cbiJdfQ==