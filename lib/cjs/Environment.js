"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const HTTP_1 = require("./HTTP");
class WindowEnvironment {
    constructor(window) {
        this.window = window;
        this.http = new HTTP_1.default(window.fetch);
    }
    post(path, data, auth_token) {
        return this.http.post(path, data, auth_token);
    }
    get(path, auth_token) {
        return this.http.get(path, auth_token);
    }
    changeLocation(path) {
        this.window.location.assign(path);
    }
    writeStorage(location, data) {
        this.window.localStorage.setItem(location, data);
    }
    readStorage(location) {
        return this.window.localStorage.getItem(location);
    }
    dispatch(action_name, data) {
        const action_event = new this.window.CustomEvent("action", {
            detail: { name: action_name, data },
            bubbles: true,
            cancelable: true
        });
        this.window.dispatchEvent(action_event);
    }
}
exports.WindowEnvironment = WindowEnvironment;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRW52aXJvbm1lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvRW52aXJvbm1lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxpQ0FBeUI7QUFnQnpCO0lBR0ksWUFBc0IsTUFBTTtRQUFOLFdBQU0sR0FBTixNQUFNLENBQUE7UUFDeEIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLGNBQUksQ0FBRSxNQUFNLENBQUMsS0FBSyxDQUFFLENBQUE7SUFDeEMsQ0FBQztJQUVELElBQUksQ0FBRyxJQUFZLEVBQUUsSUFBUyxFQUFFLFVBQW1CO1FBQy9DLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFVBQVUsQ0FBRSxDQUFBO0lBQ25ELENBQUM7SUFFRCxHQUFHLENBQUcsSUFBWSxFQUFFLFVBQW1CO1FBQ25DLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBRSxJQUFJLEVBQUUsVUFBVSxDQUFFLENBQUE7SUFDNUMsQ0FBQztJQUVELGNBQWMsQ0FBRyxJQUFZO1FBQ3pCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBRSxJQUFJLENBQUUsQ0FBQTtJQUN2QyxDQUFDO0lBRUQsWUFBWSxDQUFHLFFBQWdCLEVBQUUsSUFBWTtRQUN6QyxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUUsUUFBUSxFQUFFLElBQUksQ0FBRSxDQUFBO0lBQ3RELENBQUM7SUFFRCxXQUFXLENBQUcsUUFBZ0I7UUFDMUIsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBRSxRQUFRLENBQUUsQ0FBQTtJQUN2RCxDQUFDO0lBRUQsUUFBUSxDQUFHLFdBQW1CLEVBQUUsSUFBUztRQUNyQyxNQUFNLFlBQVksR0FBRyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFFLFFBQVEsRUFBRTtZQUN4RCxNQUFNLEVBQUUsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRTtZQUNuQyxPQUFPLEVBQUUsSUFBSTtZQUNiLFVBQVUsRUFBRSxJQUFJO1NBQ25CLENBQUUsQ0FBQTtRQUVILElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFFLFlBQVksQ0FBRSxDQUFBO0lBQzdDLENBQUM7Q0FDSjtBQXBDRCw4Q0FvQ0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSFRUUCBmcm9tIFwiLi9IVFRQXCJcblxuZXhwb3J0IGludGVyZmFjZSBFbnZpcm9ubWVudCB7XG4gICAgcG9zdCAoIHBhdGg6IHN0cmluZywgZGF0YTogYW55LCBhdXRoX3Rva2VuPzogc3RyaW5nICk6IFByb21pc2U8YW55PlxuXG4gICAgZ2V0ICggcGF0aDogc3RyaW5nLCBhdXRoX3Rva2VuPzogc3RyaW5nICk6IFByb21pc2U8YW55PlxuXG4gICAgY2hhbmdlTG9jYXRpb24oIHBhdGg6IHN0cmluZyApOiB2b2lkXG5cbiAgICB3cml0ZVN0b3JhZ2UoIGxvY2F0aW9uOiBzdHJpbmcsIGRhdGE6IGFueSApOiB2b2lkXG5cbiAgICByZWFkU3RvcmFnZSggbG9jYXRpb246IHN0cmluZyApOiBhbnlcblxuICAgIGRpc3BhdGNoKCBhY3Rpb25fbmFtZTogc3RyaW5nLCBkYXRhOiBhbnkgKTogdm9pZFxufVxuXG5leHBvcnQgY2xhc3MgV2luZG93RW52aXJvbm1lbnQgaW1wbGVtZW50cyBFbnZpcm9ubWVudCB7XG4gICAgcHJpdmF0ZSBodHRwOiBIVFRQXG5cbiAgICBjb25zdHJ1Y3RvciAoIHByaXZhdGUgd2luZG93ICkge1xuICAgICAgICB0aGlzLmh0dHAgPSBuZXcgSFRUUCggd2luZG93LmZldGNoIClcbiAgICB9XG5cbiAgICBwb3N0ICggcGF0aDogc3RyaW5nLCBkYXRhOiBhbnksIGF1dGhfdG9rZW4/OiBzdHJpbmcgKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KCBwYXRoLCBkYXRhLCBhdXRoX3Rva2VuIClcbiAgICB9XG5cbiAgICBnZXQgKCBwYXRoOiBzdHJpbmcsIGF1dGhfdG9rZW4/OiBzdHJpbmcgKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQoIHBhdGgsIGF1dGhfdG9rZW4gKVxuICAgIH1cblxuICAgIGNoYW5nZUxvY2F0aW9uICggcGF0aDogc3RyaW5nICk6IHZvaWQge1xuICAgICAgICB0aGlzLndpbmRvdy5sb2NhdGlvbi5hc3NpZ24oIHBhdGggKVxuICAgIH1cblxuICAgIHdyaXRlU3RvcmFnZSAoIGxvY2F0aW9uOiBzdHJpbmcsIGRhdGE6IHN0cmluZyApOiB2b2lkIHtcbiAgICAgICAgdGhpcy53aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oIGxvY2F0aW9uLCBkYXRhIClcbiAgICB9XG5cbiAgICByZWFkU3RvcmFnZSAoIGxvY2F0aW9uOiBzdHJpbmcgKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCBsb2NhdGlvbiApXG4gICAgfVxuXG4gICAgZGlzcGF0Y2ggKCBhY3Rpb25fbmFtZTogc3RyaW5nLCBkYXRhOiBhbnkgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGFjdGlvbl9ldmVudCA9IG5ldyB0aGlzLndpbmRvdy5DdXN0b21FdmVudCggXCJhY3Rpb25cIiwge1xuICAgICAgICAgICAgZGV0YWlsOiB7IG5hbWU6IGFjdGlvbl9uYW1lLCBkYXRhIH0sXG4gICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICB9IClcblxuICAgICAgICB0aGlzLndpbmRvdy5kaXNwYXRjaEV2ZW50KCBhY3Rpb25fZXZlbnQgKVxuICAgIH1cbn1cbiJdfQ==